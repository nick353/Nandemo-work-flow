# MEMORY.md - 記憶の中心

> このファイルは、重要な情報・決定事項・進行中のプロジェクトをまとめる場所です。
> 日付ごとの詳細は `memory/*.md` に保存されます。

---

## 🧑 andoさんについて
- Discord: ando3380
- GitHub: nick353
- VPS: Zeabur（ボリューム: `/root/clawd`）
- タイムゾーン: 日本（推定）
- 好み: 自動化・効率化・記憶の永続化を重視

---

## 📌 現在進行中のプロジェクト

### 1. 記憶システムの改善
**目的:** チャット内容を忘れないようにする  
**アプローチ:**
- [x] 既存メモリ確認（memory/2026-01-27.md発見）
- [ ] MEMORY.md作成（このファイル）
- [ ] memory_searchの動作確認
- [ ] ClawdHubでメモリ管理Skillを探す
- [ ] MCP Memory Serverの導入検討
- [ ] 自動サマリー生成cronを設定

**関連ファイル:**
- `memory/2026-01-27.md` - 過去のセットアップ記録
- `IDENTITY.md` - リッキーのアイデンティティ
- `USER.md` - andoさんの情報
- `HEARTBEAT.md` - 自動タスク定義

---

## 🔗 重要なリポジトリ
- **本家:** https://github.com/nick353/Nandemo-work-flow
- **バックアップ:** https://github.com/nick353/save-point

---

## ⚙️ システム設定

### Clawdbot設定
- `tools.exec.ask: "off"` - コマンド承認なしで実行可能
- GitHubリポジトリ復元済み
- 自動バックアップスクリプト: `/root/clawd/scripts/backup-with-retry.sh`

### 過去の問題
- Zeaburボリューム追加時に設定がリセットされた（2026-01-27）
- OAuthエラーでセッション終了（前回のリッキー）

### 解決策
- ボリュームマウント: `/root/clawd` を永続化
- 設定バックアップ: `.clawdbot-backup/` 配下に保存

---

## 📚 学んだこと・決定事項

### 2026-01-27
- Zeaburでボリュームを追加するとワークスペースがリセットされる
- GitHubからの復元が有効な対策
- memory/ディレクトリで日付ごとに記録を管理

### 2026-02-10
- **重大な問題再発：** バックグラウンドタスク完了を報告しなかった（3回目）
  - 毎朝リサーチ完了（02:33 UTC）→ 3時間後まで報告せず
  - andoさんが2回確認するまで気づかなかった
- **根本原因の特定:**
  - ルールは十分あるが、守れていない（記憶・意識任せ）
  - チェック機構がない（強制力なし）
  - バックグラウンドタスクの記録漏れ
- **解決策（ハイブリッド方式）:**
  - 🟢 短時間〜中時間タスク → 同期実行（background禁止）
  - 🔴 自動タスク（cron） → スクリプト内で強制Discord通知
  - ❌ 「完了したら報告する」約束 → 禁止
  - ✅ 待ち時間1分以上OK（andoさん了承）
  - ✅ 長時間タスクは分割実行
- **実装完了:**
  - daily-research.sh に強制Discord通知追加
  - AGENTS.md に運用ルール明記
  - RUNNING_TASKS.md 更新
  - check-completed-tasks.sh, start-task.sh 作成

### 2026-02-09
- 記憶の問題について相談を受けた
- 順番に対策を試していく方針
- まずはMEMORY.mdを作成して構造化
- 自己成長型リサーチシステムを構築
  - 専用チャンネル「#自己強化の間」作成
  - 毎朝の自動リサーチスクリプト作成
  - ClawdHub/GitHub/X検索自動化
- **問題発生:** バックグラウンドタスク完了を報告しなかった
  - andoさんから聞かれるまで黙っていた
  - 信頼を損ねる行為
- **改善措置:**
  - HEARTBEAT.md にルール追加
  - AGENTS.md に「バックグラウンドタスク管理」セクション追加
  - RUNNING_TASKS.md 作成
  - 毎回の返信前に `process list` チェックを義務化
  - 「完了したら報告する」と言ったら必ず自発的に報告
- **追加改善（エラー報告）:**
  - 「確認する」と言ったら、確認結果を必ず報告
  - エラーや予期しない結果（空データ等）を見つけたら即報告
  - 問題解決の途中でも、途中経過を報告（黙って調査しない）
  - SOUL.md に「Always complete your promises」を追加
  - daily-research.sh に警告/エラー検出機能を追加
  - X検索が全て空の場合は明示的に警告
  - Discord投稿時に警告/エラーを追加メッセージで報告

---

## 🔄 定期タスク（HEARTBEAT.md参照）
- 自動バックアップ: `backup-with-retry.sh`
- ヘルスチェック: `health-check.sh`
- プロセス監視: RUNNING_TASKS.md照合

---

**最終更新:** 2026-02-09  
**更新者:** リッキー 🐥
